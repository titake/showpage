<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>车辆详细信息</title>
	<link rel="icon" type="image/png" href="../images/icon_star2.png">  <!-- ./是当前目录   ../是上一级父目录    /是根目录  -->
	<link rel="stylesheet" type="text/css" href="../styles/logupCss.css">
	<style type="text/css">
		.view_tab_title{
			width: 20%;
			height: 50px;
			display: inline;
			background: rgba(255,255,255,0.8);
			cursor: pointer;
			justify-content: center;
			align-items: center;
		}
		.text_title_tab{
			font-size: 16px;
			font-weight: 400;
			font-family: 宋体;
			text-align: center;
			color: rgb(0,0,0);
		}
		.text_title{
			font-size: 16px;
			font-weight: 400;
			font-family: 宋体;
			text-align: center;
			width: 80px;
			color: rgb(0,0,0);
			cursor: pointer;
			text-decoration: none;
		}
		.view_A_bar{
			display: flex;
			flex-direction: row;
			justify-content: flex-start;
			align-items: center;
			width: 1190px;
			margin-left: 10px;
			margin-top: 16px;
			margin-bottom: 16px;
		}
		.text_a_bar{
			font-size: 14.5px;
			font-weight: 400;
			font-family: 宋体;
			text-align: left;
			color: rgb(0,0,0);
			text-decoration: none;
			cursor: default;
		}
		.text_p_bar{
			font-size: 11px;
			font-weight: 400;
			font-family: 宋体;
			text-align: center;
			color: rgb(100,100,100);
			text-decoration: none;
			cursor: default;
		}
		/*主页中*/
		.item_row_star_star{
			width: 560px;
			display: flex;
			flex-direction: row;
			justify-content: flex-start;
			align-content: flex-start;
		}
		.img_show{
			width: 200px;
			size: contain;
			position: center;
		}
		.div_column_center_start{
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-content: flex-start;
		}
		.item_column_start_start{
			display: flex;
			flex-direction: column;
			justify-content: flex-start;
			align-content: flex-start;
		}
	</style>
	<script type="text/javascript" src="../styles/myjs.js"></script>
	<script type="text/javascript" src="../lib/jquery-3.2.0.js"></script>
</head>
<body>
	<!--titleBar-->
	<div class="view_title">
		<div class="view_title_left">
			<div id="id_tab_main" class="view_tab_title" onmouseover="turnToBlur('id_tab_main')" onmouseout="turnToClear('id_tab_main')" onclick="window.location.href = 'hello.html'">
				<p class="text_title_tab">首页</p>
			</div>
			<div id="id_tab_transform" class="view_tab_title"  onmouseover="turnToBlur('id_tab_transform')" onmouseout="turnToClear('id_tab_transform')" onclick="window.location.href = 'hello_transform.html'">
				<p class="text_title_tab">道路运输</p>
			</div>
			<div id="id_tab_teach" class="view_tab_title" onmouseover="turnToBlur('id_tab_teach')" onmouseout="turnToClear('id_tab_teach')" onclick="window.location.href = 'hello_teach.html'">
				<p class="text_title_tab">驾校</p>
			</div>
			<div id="id_tab_maintain" class="view_tab_title" style="background: transparent;" onmouseover="turnToBlur('id_tab_maintain')" onmouseout="turnToClear('id_tab_maintain')" onclick="window.location.href = 'hello_maintain.html'">
				<p class="text_title_tab">车辆维护</p>
			</div>
			<div id="id_tab_transport" class="view_tab_title" onmouseover="turnToBlur('id_tab_transport')" onmouseout="turnToClear('id_tab_transport')" onclick="window.location.href = 'hello_transport.html'">
				<p class="text_title_tab">客运站</p>
			</div>
		</div>
	</div>
	<!--导航-->
	<div class="view_A_bar">
		<a class="text_a_bar" style="cursor: pointer;text-align: center;" href="hello_maintain.html">车辆维护</a>
		<p class="text_p_bar" style="margin-left: 6px;margin-right: 6px;"> > </p>
		<a class="text_a_bar" style="cursor: pointer;text-align: center;" href="show_mainComps.html">所有车辆</a>
		<p class="text_p_bar" style="margin-left: 6px;margin-right: 6px;"> > </p>
		<a class="text_a_bar" style="text-align: center;" id="id_a_compName" href="show_mainComp_one.html">plate_num</a>
	</div>
	<!--main-->
	<div class="view_content_column" style="width: 600px;padding-top: 15px;">
		<div class="item_row_star_star" style="padding-bottom: 20px; border-bottom: dashed 1px #999;">
			<img src="../uploadImg/" class="img_show">
			<div class="div_column_center_start" style="height: 160px;margin-left: 20px; ">
				<div class="item_row_star_star" style="height: 30px;width: 300px;align-content: center;">
					<p class="text_a_bar" style="width: 80px;text-align: left;margin:0px;padding: 0px;">驾驶员一</p>
					<p class="text_a_bar" style="width: 200px;text-align: center;margin:0px;padding: 0px;cursor: pointer;" id="id_driver1">xxxx</p>
				</div>
				<div class="item_row_star_star" style="height: 30px;width: 300px;align-content: center;">
					<p class="text_a_bar" style="width: 80px;text-align: left;margin:0px;padding: 0px;">驾驶员二</p>
					<p class="text_a_bar" style="width: 200px;text-align: center;margin:0px;padding: 0px;cursor: pointer;" id="id_driver2">xxxx</p>
				</div>
			</div>
		</div>
		<div class="item_column_start_start" style="margin-top: 20px;">
			<div class="item_row_star_star" style="width: 560px;height: 40px;">
				<p class="text_a_bar" style="width: 100px;" id="id_plate_num">plate_num</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 110px;" id="id_car_classify">car_classify</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 200px;" id="id_car_brand">car_brand</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 90px;" id="id_people_num">people_num</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;">
				<p class="text_a_bar" style="width: 70px;" >注册日期:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_date_registe">2017-09-23</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 70px;">发证日期:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 100px;" id="id_date_getLicence">date_getLicence</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;">
				<p class="text_a_bar" style="width: 70px;" >年审日期:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_date_verify">2017-09-23</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 80px;">检验有效期:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 100px;" id="id_date_valid">date_valid</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;">
				<p class="text_a_bar" style="width: 70px;" >发动机号:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_engine_num">engine_num</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 80px;">车辆识别号:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_vin">vin</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;">
				<p class="text_a_bar" style="width: 70px;" >运营证号:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_operate_num">operate_num</p>
				<p class="text_a_bar" style="width: 80px;margin-left: 20px;" title="file_num" id="id_file">档案编号:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" title="file_num" id="id_file_num">file_num</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;" id="id_taxi">
				<p class="text_a_bar" style="width: 80px;" >经营有效期:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 100px;" id="id_date_opera_valid">date_opera_valid</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;" id="id_bus">
				<p class="text_a_bar" style="width: 70px;" >运营里程:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 120px;" id="id_operate_mileage">operate_mileage</p>
				<p class="text_a_bar" style="width: 100px;margin-left: 20px;" title="shuttle" >线路牌有效期:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 100px;" title="shuttle" id="id_operate_valid_date">operate_valid_date</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;margin-bottom: 10px;" id="id_bus2">
				<p class="text_a_bar" style="width: 70px;" >运营线路:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 490px;" id="id_operate_line">operate_line</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;" id="id_danger">
				<p class="text_a_bar" style="width: 80px;" >危险品名称:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 100px;" id="id_danger_name">danger_name</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;padding-bottom: 10px; border-bottom: dashed 1px #888">
				<p class="text_a_bar" style="width: 80px;" >所属公司名:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 475px;" id="id_comp_name">comp_name</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;">
				<p class="text_a_bar" style="width: 113px;" >交强险单号:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_impunity_num">impunity_date</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 138px;">交强险到期时间:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 100px;" id="id_impunity_date">impunity_date</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;">
				<p class="text_a_bar" style="width: 113px;" >商业险单号:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_commercial_num">commercial_num</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 138px;">商业险到期时间:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 100px;" id="id_commercial_date">commercial_date</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;">
				<p class="text_a_bar" style="width: 113px;" >承运责任险单号:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_liability_num">liability_num</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 138px;">承运责任险到期时间:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 100px;" id="id_liability_date">liability_date</p>
			</div>
			<div class="item_row_star_star" style="width: 560px;height: 40px;margin-bottom: 20px;">
				<p class="text_a_bar" style="width: 70px;" >投保公司:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_insur_comp_name">insur_comp_name</p>
				<p class="text_a_bar" style="margin-left: 20px;width: 138px;">投保公司联系方式:</p>
				<p class="text_a_bar" style="margin-left: 5px;width: 150px;" id="id_comp_phone">comp_phone</p>
			</div>
		</div>
	</div>
	<div class="view_footer" style="margin-top: 110px;">
		<p class="text_footer">Copyright © 2016-2017 titake All Rights Reserved.</p>
	</div>
	<script type="text/javascript">
		//?cartype=&plate_num=
		plate_num = decodeURI(window.location.search.split("?")[1].split("&")[1].split("=")[1]);   
		cartype = decodeURI(location.search.split("?")[1].split("&")[0].split("=")[1]);
		//var compName = compame[1];
		$(function(){
			$("#id_a_compName").html(plate_num);
			$("#id_a_compName").attr("href",location.href);   //这里url是已经编码过的，所以不需要再编码一次
		});
		var sql = "select * from tb_"+cartype+" where plate_num='"+plate_num+"';"
		var request = new XMLHttpRequest();
		request.open("GET","../ajax/getData_sql.php?flag=car_one_show&sql="+sql,true);
		request.send();
		request.onreadystatechange = function(){
			if (request.readyState===4) {
				if (request.status===200) {
					var result = JSON.parse(request.responseText);
					if (result.failed==true) {
						console.log(result.reason);
						alert(result.reason);
					}else{
						$(function(){
							$(".img_show").attr("src","../uploadImg/"+result.img);
							$("#id_plate_num").html(result.plate_num);
							$("#id_car_classify").html(result.car_classify);
							$("#id_car_brand").html(result.car_brand);
							$("#id_comp_name").html(result.comp_name);
							$("#id_engine_num").html(result.engine_num);
							$("#id_vin").html(result.vin);
							$("#id_people_num").html("核载"+result.people_num+"人");
							$("#id_date_registe").html(result.date_registe);
							$("#id_date_getLicence").html(result.date_getLicence);
							$("#id_date_verify").html(result.date_verify);
							$("#id_date_valid").html(result.date_valid);
							$("#id_operate_num").html(result.operate_num);
							$("#id_driver1").html(result.driver1);
							$("#id_driver2").html(result.driver2);
							$("#id_driver1").click(function(){
								if ($(this).html()!="empty") {
									window.open("show_driver_one.html?sessionName=driver1","_blank");
								}
							});
							$("#id_driver2").click(function(){
								if ($(this).html()!="empty") {
									window.open("show_driver_one.html?sessionName=driver2","_blank");
								}
							});
							switch (cartype){
								case 'taxi':
									$("#id_file_num").html(result.file_num);
									$("#id_date_opera_valid").html(result.date_opera_valid);
									break;
								case 'bus':
									$("#id_file_num").html(result.file_num);
									$("#id_operate_line").html(result.operate_line);
									$("#id_operate_mileage").html(result.operate_mileage);
									break;
								case 'shuttle':
									$("#id_file_num").html(result.file_num);
									$("#id_operate_line").html(result.operate_line);
									$("#id_operate_mileage").html(result.operate_mileage);
									$("#id_operate_valid_date").html(result.operate_valid_date);
									break;
								case 'normal_truck':
									$("#id_file_num").html(result.file_num);
									break;
								case 'danger_truck':
									$("#id_danger_name").html(result.danger_name);
									break;
								case 'student_car':
									break;
							}
						});
						sql = "select * from tb_insurance where plate_num='"+plate_num+"';"
						request = new XMLHttpRequest();
						request.open("GET","../ajax/getData_sql.php?flag=dosql_one&sql="+sql,true);
						request.send();
						request.onreadystatechange = function(){
							if (request.readyState===4) {
								if (request.status===200) {
									result = JSON.parse(request.responseText);
									if (result.failed==true) {
										console.log(result.reason);
										alert(result.reason);
									}else{
										$(function(){
											$("#id_impunity_num").html(result.impunity_num);
											$("#id_impunity_date").html(result.impunity_date);
											$("#id_commercial_num").html(result.commercial_num);
											$("#id_commercial_date").html(result.commercial_date);
											$("#id_liability_num").html(result.liability_num);
											$("#id_liability_date").html(result.liability_date);
											$("#id_insur_comp_name").html(result.insur_comp_name);
											$("#id_comp_phone").html(result.comp_phone);
										});
									}
								}else{
									alert("error"+request.status);
								}
							}
						}
					}
				}else{
					alert("error"+request.status);
				}
			}
		}
		switch (cartype){
			case 'taxi':
				$(function(){
					$("id_danger").hide();
					$("#id_bus").hide();
					$("#id_bus2").hide();
					$("#id_taxi").css("display","flex");
				});
				break;
			case 'bus':
				$(function(){
					$("#id_taxi").hide();
					$("#id_danger").hide();
					$("#id_bus").css("display","flex");
					$("#id_bus2").css("display","flex");
					$("#id_bus>p[title=shuttle]").hide();
				});
				break;
			case 'shuttle':
				$(function(){
					$("#id_danger").hide();
					$("#id_bus").css("display","flex");
					$("#id_bus2").css("display","flex");
					$("#id_taxi").css("display","none");
				});
				break;
			case 'normal_truck':
				$(function(){
					$("#id_danger").hide();
					$("#id_bus").hide();
					$("#id_bus2").hide();
					$("#id_taxi").hide();
				});
				break;
			case 'danger_truck':
				$(function(){
					$("#id_danger").css("display","flex");
					$("#id_bus").hide();
					$("#id_bus2").hide();
					$("#id_taxi").hide();
					$("#id_file").hide();
					$("#id_file_num").hide();
				});
				break;
			case 'student_car':
				$(function(){
					$("#id_danger").hide();
					$("#id_bus").hide();
					$("#id_bus2").hide();
					$("#id_taxi").hide();
					$("#id_file").hide();
					$("#id_file_num").hide();
				});
				break;
		}
	</script>
</body>
</html>